<!DOCTYPE html>
<html lang="en">
<head>
    <title>Cart</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="Merch/merchstyle.css">
    <head>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"> 
    </head>
</head>
<body>
    <div id="logo">
        <img src="Images/Logo.png">
    </div>

    <!-- Navigation menu and other parts of your page -->

    <section class="cart">
        <h1>Shopping Cart</h1>
        
        <div id="cart-items">
            <!-- Items added dynamically with JS -->  
        </div>
      
        <div class="cart-totals">
            <p>Subtotal: <span class="subtotal">£0</span></p> 
            <p>Tax: <span class="tax">£0</span></p>
            <p>Total: <span class="total">£0</span></p>  
        </div>
      
        <div class="payment-options">
            <button id="paypal-button">Pay with PayPal</button>
            <button id="stripe-button">Pay with Stripe</button>
        </div>

        <div class="cart-actions">  
            <button id="continue-shopping">Continue Shopping</button> 
            <button id="checkout">Checkout</button>
        </div>
    </section>

    <!-- Footer and other sections -->

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const cartItemsEl = document.getElementById('cart-items');
        const subtotalEl = document.querySelector('.subtotal');
        const taxEl = document.querySelector('.tax');
        const totalEl = document.querySelector('.total');
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        function updateCartTotals() {
            let subtotal = 0;
            cart.forEach(item => {
                subtotal += parseFloat(item.price.substring(1)) * item.quantity;
            });
            let tax = subtotal * 0.2; // assuming 20% tax rate
            let total = subtotal + tax;

            subtotalEl.textContent = `£${subtotal.toFixed(2)}`;
            taxEl.textContent = `£${tax.toFixed(2)}`;
            totalEl.textContent = `£${total.toFixed(2)}`;
        }

        function displayCartItems() {
            cartItemsEl.innerHTML = '';
            cart.forEach((item, index) => {
                cartItemsEl.innerHTML += `<div class="cart-item">
                    <p>${item.name}</p>
                    <p>£${(parseFloat(item.price.substring(1)) * item.quantity).toFixed(2)}</p>
                    <div>
                        <button onclick="decreaseQuantity(${index})">-</button>
                        <span>${item.quantity}</span>
                        <button onclick="increaseQuantity(${index})">+</button>
                    </div>
                </div>`;
            });
        }

        function increaseQuantity(index) {
            cart[index].quantity += 1;
            updateCartDisplay();
        }

        function decreaseQuantity(index) {
            if (cart[index].quantity > 1) {
                cart[index].quantity -= 1;
                updateCartDisplay();
            }
        }

        function updateCartDisplay() {
            displayCartItems();
            updateCartTotals();
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        displayCartItems();
        updateCartTotals();
    });
    </script>
</body>
</html>
